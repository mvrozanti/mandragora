" Comment toggler for Reddit and Hacker News
" bind ;c hint -c [class*="expand"],[class="togg"]
unbind ;c

" GitHub pull request checkout command to clipboard (only works if you're a collaborator or above)
bind yp composite js document.getElementById("clone-help-step-1").textContent.replace("git checkout -b", "git checkout -B").replace("git pull ", "git fetch ") + "git reset --hard " + document.getElementById("clone-help-step-1").textContent.split(" ")[3].replace("-","/") | yank

" Git{Hub,Lab} git clone via SSH yank
" bind yg composite js "git clone " + document.location.href.replace(/https?:\/\//,"git@").replace("/",":").replace(/$/,".git") | clipboard yank

" I like wikiwand but I don't like the way it changes URLs
" bindurl wikiwand.com yy composite js document.location.href.replace("wikiwand.com/en","wikipedia.org/wiki") | clipboard yank

" Make gu take you back to subreddit from comments
bindurl reddit.com gu urlparent 3

" Allow Ctrl-a to select all in the commandline
unbind --mode=ex <C-a>

" Let Ctrl-c to copy in the commandline
unbind --mode=ex <C-c>

" Handy multiwindow/multitasking binds
bind gd tabdetach
bind gD composite tabduplicate | tabdetach

" Sane hinting mode
" set hintfiltermode vimperator-reflow
" set hintnames numeric

" Make Tridactyl work on more sites at the expense of some security
" set csp clobber
" fixamo_quiet

" Make quickmarks for the sane Tridactyl issue view
quickmark t https://github.com/cmcaine/tridactyl/issues?utf8=%E2%9C%93&q=sort%3Aupdated-desc+

" New reddit is bad
autocmd DocStart www.reddit.com js tri.excmds.urlmodify("-t", "www", "old")
" Mosquito nets won't make themselves
autocmd DocStart www.amazon.co.uk js tri.excmds.urlmodify("-t", "www", "smile")

autocmd DocLoaded github.com js document.querySelector("html.TridactylThemeUnugly body.logged-in.env-production.page-responsive div.position-relative.js-header-wrapper div.flash.flash-full.js-notice.flash-warn").remove()

" YouTube
bindurl https://www.youtube.com <C-f> hint -Jc a#thumbnail.yt-simple-endpoint.inline-block.style-scope.ytd-thumbnail
bindurl https://www.youtube.com/watch <C-f> hint -Jc button.ytp-button

""set hintdelay 100
""ignoremaps = {
""    "<S-Insert>": "mode normal",
""    "<AC-Escape>": "mode normal",
""    "<AC-`>": "mode normal",
""    "<C-o>": "nmode normal 1 mode ignore",
""}

set modeindicator false
set smoothscroll true
bind / fillcmdline find
bind ? fillcmdline find -?
bind n findnext 1
bind N findnext -1
colors mine
bind J tabnext
bind K tabprev
set hintchars asdertgbvcxzq
bind b scrollpage -0.5
bind d scrollpage  0.5
bind x tabclose
bind <C-o> fillcmdline open 
bind <C-V> viewsource
bind yu composite js document.URL | yank
bind <C-1> open reddit.com
bind <C-2> open youtube.com
bind <C-3> open github.com
